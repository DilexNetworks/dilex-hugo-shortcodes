/* dx/compare
   - Side-by-side compare (mode="side")
   - Slider compare (mode="slider")
   Classes are currently prefixed with sc-* in the template.
*/

/* -------- Shared -------- */

.sc-compare,
.sc-slider{
  --cmp-gap: 1rem;
  --radius: .75rem;
  --credit-bg: rgba(0,0,0,.55);
  --credit-color: #fff;
  --credit-align: left;
  --pos: 50%;
}

.sc-figure{
  position: relative;
  margin: 0;
  border-radius: var(--radius);
  overflow: hidden;
}

.sc-image{
  display: block;
  width: 100%;
  height: auto;
}

/* Credit overlay (figcaption) */
.sc-credit{
  position: absolute;
  bottom: .5rem;
  left: .5rem;
  right: .5rem;
  display: inline-block;
  padding: .35rem .5rem;
  font-size: .85rem;
  line-height: 1.2;
  border-radius: .5rem;
  background: var(--credit-bg);
  color: var(--credit-color);
  text-align: var(--credit-align);
  backdrop-filter: blur(8px);
}

.sc-subcap{
  margin-top: .5rem;
  font-size: .95rem;
  opacity: .9;
}

/* -------- Side-by-side mode -------- */

.sc-compare{
  display: grid;
  grid-template-columns: minmax(0, var(--leftW, 50%)) minmax(0, var(--rightW, 50%));
  gap: var(--cmp-gap);
  align-items: start;
}

.sc-photo{
  min-width: 0;
}

.sc-photo .sc-subcap{
  margin-bottom: 0;
}

/* Mobile: stack */
@media (max-width: 720px){
  .sc-compare{
    grid-template-columns: 1fr;
  }
}

/* -------- Slider mode -------- */

.sc-slider{
  width: 100%;
  margin: 1rem 0;
}

.sc-slider-stage{
  position: relative;
  border-radius: var(--radius);
  overflow: hidden;
  /* Size priority:
     1) --slider-height (explicit)
     2) --slider-aspect (explicit or inferred)
     3) .sc-sizer image (fallback) */
  height: var(--slider-height, auto);
  aspect-ratio: var(--slider-aspect, auto);
}

/* Invisible sizer image to give the stage intrinsic height when needed */
.sc-sizer{
  display: block;
  width: 100%;
  height: auto;
  visibility: hidden;
  pointer-events: none;
  user-select: none;
}

/* Base (after) fills the stage */
.sc-after{
  position: absolute;
  inset: 0;
}

/* Before sits on top and is clipped by --pos (do not resize, just clip) */
.sc-before{
  position: absolute;
  inset: 0;
  width: 100%;
  overflow: hidden;
  /* Show the left portion up to --pos */
  clip-path: inset(0 calc(100% - var(--pos)) 0 0);
}

/* No-crop mode: keep the full image visible.
   For sliders, BEFORE and AFTER must be the same dimensions/aspect to align perfectly. */
.sc-slider-stage .sc-image{
  width: 100%;
  height: 100%;
  object-fit: var(--cmp-fit, contain); /* contain = no crop, cover = crop */
  object-position: center;
}

/* Labels (chips) */
.sc-chip{
  position: absolute;
  top: .75rem;
  padding: .3rem .55rem;
  font-size: .8rem;
  line-height: 1;
  border-radius: 999px;
  background: rgba(0,0,0,.55);
  color: #fff;
  backdrop-filter: blur(8px);
}

.sc-chip-left{ left: .75rem; }
.sc-chip-right{ right: .75rem; }

/* Handle visuals */
.sc-handle{
  position: absolute;
  top: 0;
  bottom: 0;
  left: var(--pos);
  transform: translateX(-50%);
  pointer-events: none;
  display: grid;
  place-items: center;
}

.sc-handle-line{
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background: rgba(255,255,255,.85);
  box-shadow: 0 0 0 1px rgba(0,0,0,.25);
}

.sc-handle-knob{
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 999px;
  background: rgba(255,255,255,.9);
  box-shadow: 0 6px 18px rgba(0,0,0,.25);
}

/* Accessible range input overlays the whole stage */
.sc-range{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  opacity: 0;
  cursor: ew-resize;
}

/* Captions below the slider */
.sc-slider-captions{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--cmp-gap);
  margin-top: .75rem;
}

@media (max-width: 720px){
  .sc-slider-captions{
    grid-template-columns: 1fr;
  }
}